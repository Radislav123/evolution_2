## Производительность

1) Numba @njit(parallel=True)

### Оптимизации

1) Посмотреть, какие блоки gpu недозадействованы, и переложить часть работы на них.
2) Записывать все уровни в одну текстуру, но разбить глобальную текстуру на чанки
    1) Сейчас при обработке нескольких уровней гарантировано идут промахи кэша, так как данные берутся из разных текстур. Такая реорганизация позволит
       радикально сократить промахи кэша.


## Существа
### Реализация
Взаимодействие с миром реализовать на GPU, а друг с другом на CPU?

Пример реализации:

```glsl
struct Creature {
    vec3 position;
    vec3 velocity;
    uint type;
    float health;
    uint target_voxel;
};

layout(std430, binding = 5) buffer Creatures {
    Creature u_creatures[];
};
```

### Нейроны и нейронная сеть

1) Реализовать на gpu через "связанную сеть" - у каждого нейрона есть входы и веса на этих входах;
2) Входы - ссылки на другие нейроны или сенсоры;
3) Каждый тик обрабатывается вся сеть, но только на один шаг вперед;
    1) К примеру, сеть состоит из 3 нейронов. Значит 3-й не получит информации от 1-го в первый тик, а только от 2-го. до 3-го информация от 1-го дойдет только
       на второй тик;
    2) Для этого сеть необходимо обрабатывать, начиная с выходов;


## Вещества

1) Межмолекулярное сцепление (Cohesion)
2) Потенциал взаимодействия (Pressure EOS)
3) Эффективная вязкость через энергию
4) Предел текучести (Yield Stress)


## Заявки по физическим взаимодействиям

1) Держать заявку в юните, от которого она
2) В ячейке держать количество заявок в каждого из соседей для вычисления смещения (соседи от 0 до 5) (по 4 бита на соседа - 0-3 биты для 0-го, 4-7 биты для
   1-го и т.д.)
3) В блоках по очереди (по 4 байта на юнит/заявку) перечислять в каких юнитах куда заявки
    1) 0-3 биты для первой заявки в 0-го соседа, 4-7 - для второй в 0-го, дальше, если в 0-го всего две заявки, то 8-11 - для первой в 1-го соседа и т.д.

## Химические реакции
Можно начать с того, что описано ниже. Заводится 2д-текстура с размерами NxN, где N - количество веществ в мире. В ячейке с координатами (I, J) лежит реакция
этих двух веществ. Вероятно, реакции с большим количеством веществ и не нужны.

## Разное
1) Для поглощения лучей используется Закон Бугера — Ламберта — Бера
